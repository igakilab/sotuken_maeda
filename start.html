
<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="stposition.css" type="text/css">
  <title>ゲーム画面</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script type="text/javascript" src="msotu.js"></script>
</head>

<body>
  <div class="ToDo" id=droparea1>
    <div class="dai"><br>
      <p>
        <font size="7">
          <center>ToDo</center>
        </font>
      </p><br>
    </div>
    <div class="note" id="task1"  draggable="true"  onClick="disp1(t1a);">
          <p>story1<br>ユーザはあらかじめ指定した相手と、セキュアにメールを送受信できる。<br>24</p>
  </div>

  <div class="note" id="task2" draggable="true" onClick="disp2(t2a);">
        <p>story2<br>ユーザは大きなファイルをセキュアに送信できる。<br>21</p>
</div>
<div class="note" id="task3" draggable="true" onClick="disp3(t3a);">
      <p>story3<br>ユーザは送ったメールに読み取り期限を設定できる。<br>27</p>
</div>
  </div>
  <div class="Doing" id=droparea2>
    <div class="dai"><br>
      <p>
        <font size="7">
          <center>Doing</center>
        </font>
      </p><br>
    </div>
  </div>
  <div class="Done" id=droparea3>
    <div class="dai"><br>
      <p>
        <font size="7">
          <center>Done</center>
        </font>
      </p><br>
    </div>
  </div>

  <audio id="daicesound" preload="auto">
    <source src="daicesound.wav" type="audio/wav">
  </audio>
  <audio id="clikcsound" preload="auto">
    <source src="sound.mp3" type="audio/wav">
  </audio>
  <span><img src="6d.gif" id="dice" class="dice" onclick="daice();" alt="" name="dice"></span>
  <span><img src="6d.gif" id="dice1" class="dice1" onclick="daice();" alt="" name="dice1"></span>
  <span><img src="card.png" id="card" class="card" onclick="chance();" width="300" height="200" name="card"></span>
  <p class="sukoa">タスク； <span id="task">0</span></p>
  <p class="log"><span id="log">ログ</span></p>
  <button class="end"  type="button" onclick="end();">end</button>
  <p class="player"><span id="player">player1の番です</span></p>
  <audio id="stbgm" preload="auto" autoplay loop>
    <source src="stbgm.mp3" type="audio/mp3">
  </audio>
</body>

</html>

<script>
let task1 = document.getElementById("task1");
let task2 = document.getElementById("task2");
let task3 = document.getElementById("task3");
let area1 = document.getElementById("droparea1");
let area2 = document.getElementById("droparea2");
let area3 = document.getElementById("droparea3");
let t1a = 1;
let t2a = 1;
let t3a = 1;

//ドラッグ開始時の処理
task1.addEventListener( "dragstart" , function(evt){

  //ドラッグ要素のidをdataTransferにセット
  evt.dataTransfer.setData( "text/html" , evt.target.id );
  evt.stopPropagation();
}, false );


task2.addEventListener( "dragstart" , function(evt){

  //ドラッグ要素のidをdataTransferにセット
  evt.dataTransfer.setData( "text/html" , evt.target.id );
  evt.stopPropagation();
}, false );


task3.addEventListener( "dragstart" , function(evt){

  //ドラッグ要素のidをdataTransferにセット
  evt.dataTransfer.setData( "text/html" , evt.target.id );
  evt.stopPropagation();
}, false );


//ドロップされた時の処理
area1.addEventListener( "drop" , function(evt){
  //id名をdataTransferから取り出す
  var id = evt.dataTransfer.getData( "text/html" );

  var obj1 = document.getElementById( id );
  if( obj1 )
  {
    area1.appendChild( obj1 );  //要素を移動する
    if(id=='task1'){
      t1a=1;
    }
    if(id=='task2'){
      t2a=1;
    }
    if(id=='task3'){
      t3a=1;
    }

  }

  evt.preventDefault();
}, false );

area1.addEventListener( "dragenter" , function(evt){
  evt.preventDefault();
}, false );
area1.addEventListener( "dragover" , function(evt){
  evt.preventDefault();
}, false );




area2.addEventListener( "drop" , function(evt){

  //id名をdataTransferから取り出す
  var id = evt.dataTransfer.getData( "text/html" );

  var obj2 = document.getElementById( id );
  if( obj2 )
  {
    area2.appendChild( obj2 );  //要素を移動する
    if(id=='task1'){
      t1a=2;
    }
    if(id=='task2'){
      t2a=2;
    }
    if(id=='task3'){
      t3a=2;
    }
  }

  evt.preventDefault();
}, false );

//２つのイベントでデフォルト動作を抑制する
area2.addEventListener( "dragenter" , function(evt){
  evt.preventDefault();
}, false );
area2.addEventListener( "dragover" , function(evt){
  evt.preventDefault();
}, false );






area3.addEventListener( "drop" , function(evt){

  //id名をdataTransferから取り出す
  var id = evt.dataTransfer.getData( "text/html" );

  var obj3 = document.getElementById( id );
  if( obj3 )
  {
    area3.appendChild( obj3 );  //要素を移動する
    if(id=='task1'){
      t1a=3;
    }
    if(id=='task2'){
      t2a=3;
    }
    if(id=='task3'){
      t3a=3;
    }
  }

  evt.preventDefault();
}, false );

//２つのイベントでデフォルト動作を抑制する
area3.addEventListener( "dragenter" , function(evt){
  evt.preventDefault();
}, false );
area3.addEventListener( "dragover" , function(evt){
  evt.preventDefault();
}, false );
</script>
